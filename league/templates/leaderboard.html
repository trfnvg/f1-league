{% extends "base.html" %}
{% load league_extras %}

{% block title %}–¢–∞–±–ª–∏—Ü–∞ —Å–µ–∑–æ–Ω–∞ ‚Äî F1 Predictions 2026{% endblock %}

{% block content %}
<h1 class="h3 mb-5">–¢–∞–±–ª–∏—Ü–∞ —Å–µ–∑–æ–Ω–∞</h1>


<div class="card shadow-sm mt-4">
  <div class="card-body">

    <div class="table-responsive" style="max-height: 70vh;">
      <table class="table table-sm align-middle mb-0 leaderboard-table">
        <thead>
          <tr>
            <th class="sticky-head sticky-col">#</th>
            <th class="sticky-head sticky-col" style="left: 44px;">–ò–≥—Ä–æ–∫</th>
            <th class="sticky-head text-center">–ò—Ç–æ–≥–æ</th>
            {% for e in events %}
              <th class="sticky-head text-center">R{{ e.round_number }}</th>
            {% endfor %}
          </tr>
        </thead>

        <tbody>
          {% for r in rows %}
            <tr class="{% if r.is_leader %}table-active{% endif %}">
              <td class="sticky-col" style="width:44px;">
                {% if r.rank == 1 %}ü•á
                {% elif r.rank == 2 %}ü•à
                {% elif r.rank == 3 %}ü•â
                {% else %}{{ r.rank }}
                {% endif %}
              </td>

              <td class="sticky-col fw-semibold" style="left: 44px;">
                {{ r.user.username }}
              </td>

              <td class="text-center">
                <span class="badge text-bg-primary">{{ r.total }}</span>
              </td>

              {% for e in events %}
                <td class="text-center">
                  {% score_for scores_map r.user.id e.id as s %}
                  {% if s %}
                    <span class="fw-semibold">{{ s.points }}</span>
                  {% else %}
                    <span class="text-muted">‚Äî</span>
                  {% endif %}
                </td>
              {% endfor %}
            </tr>
          {% empty %}
            <tr><td colspan="999" class="text-muted">–ü–æ–∫–∞ –Ω–µ—Ç –∏–≥—Ä–æ–∫–æ–≤.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</div>
{% endblock %}

